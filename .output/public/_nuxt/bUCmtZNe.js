import{u as oe,r as x,G as ae,f as le,c as w,o as u,a as s,b as t,d as v,w as n,h as i,aG as ne,p as Q,I as N,J as U,aH as j,aI as H,t as M,aJ as re,aK as ie,K as ce,av as de,i as ue,j as pe,ac as _e,l as K,e as fe,v as P,aL as ve,Q as me,ag as ge,m as ye,R as he,a6 as be,aM as we,g as E,aN as ke,aO as xe,S as q,aP as $e,ar as Fe,s as Be}from"./D9U9Eznd.js";/* empty css        */import{_ as X}from"./DlAUqK2U.js";import{c as D}from"./BsKgSVqs.js";/* empty css        *//* empty css        *//* empty css        *//* empty css        */import{U as Ce}from"./0wCB_tQN.js";import{L as Ae}from"./Bw5E3kuK.js";import{u as Se}from"./C3Ashe_A.js";const Ie={class:"sidebar"},Re={class:"filter-section"},Me={class:"font-briscolade"},ze={class:"filter-options"},Le=["value"],Pe={class:"filter-section"},Ee={class:"font-briscolade"},Ve={class:"filter-options"},qe=["value"],Ne={class:"filter-section"},Ue={class:"font-briscolade"},je={class:"filter-options"},He=["value"],De={class:"filter-actions"},Ge={__name:"AppAside",emits:["filter-change"],setup(k,{emit:m}){const c=oe(),g=["Apple","Samsung","Google","OnePlus","Xiaomi"],$=[{label:"$0 - $300",min:0,max:300},{label:"$300 - $600",min:300,max:600},{label:"$600 - $900",min:600,max:900},{label:"$900+",min:900,max:1/0}],V=["64GB","128GB","256GB","512GB","1TB"],F=x([]),B=x([]),p=x([]),y=m;function f(){y("filter-change",{brands:F.value,priceRanges:B.value,storage:p.value})}function h(){F.value=[],B.value=[],p.value=[],f()}return ae(()=>{F.value=c.query.brands?c.query.brands.split(","):[],B.value=c.query.priceRanges?c.query.priceRanges.split(",").map(d=>{const[o,b]=d.split("-");return{label:`$${o}${b?` - $${b}`:""}`,min:o?parseInt(o):0,max:b?parseInt(b):1/0}}):[],p.value=c.query.storage?c.query.storage.split(","):[]}),le([F,B,p],()=>{f()},{deep:!0}),(d,o)=>{const b=Q;return u(),w("div",Ie,[s("div",Re,[s("h3",Me,[t(b,{class:"section-icon"},{default:n(()=>[t(i(ne))]),_:1}),o[3]||(o[3]=v(" Brand "))]),s("div",ze,[(u(),w(N,null,U(g,_=>s("label",{key:_,class:"filter-label"},[j(s("input",{type:"checkbox","onUpdate:modelValue":o[0]||(o[0]=L=>F.value=L),value:_,onChange:f,class:"filter-checkbox"},null,40,Le),[[H,F.value]]),o[4]||(o[4]=s("span",{class:"checkmark"},null,-1)),v(" "+M(_),1)])),64))])]),s("div",Pe,[s("h3",Ee,[t(b,{class:"section-icon"},{default:n(()=>[t(i(re))]),_:1}),o[5]||(o[5]=v(" Price Range "))]),s("div",Ve,[(u(),w(N,null,U($,_=>s("label",{key:_.label,class:"filter-label"},[j(s("input",{type:"checkbox","onUpdate:modelValue":o[1]||(o[1]=L=>B.value=L),value:_,onChange:f,class:"filter-checkbox"},null,40,qe),[[H,B.value]]),o[6]||(o[6]=s("span",{class:"checkmark"},null,-1)),v(" "+M(_.label),1)])),64))])]),s("div",Ne,[s("h3",Ue,[t(b,{class:"section-icon"},{default:n(()=>[t(i(ie))]),_:1}),o[7]||(o[7]=v(" Storage "))]),s("div",je,[(u(),w(N,null,U(V,_=>s("label",{key:_,class:"filter-label"},[j(s("input",{type:"checkbox","onUpdate:modelValue":o[2]||(o[2]=L=>p.value=L),value:_,onChange:f,class:"filter-checkbox"},null,40,He),[[H,p.value]]),o[8]||(o[8]=s("span",{class:"checkmark"},null,-1)),v(" "+M(_),1)])),64))])]),s("div",De,[s("button",{onClick:h,class:"clear-filters-btn"},[t(b,{class:"clear-icon"},{default:n(()=>[t(i(ce))]),_:1}),o[9]||(o[9]=v(" Clear All Filters "))])])])}}},Te=X(Ge,[["__scopeId","data-v-f80d40fe"]]);/**
 * @license lucide-vue-next v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=D("box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-vue-next v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=D("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]);/**
 * @license lucide-vue-next v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=D("sliders-horizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]),Je=de("favourites",()=>{const k=x([]),m=x([]),c=x(!1),g=x(null),$=ue();return{favourites:k,favouriteIds:m,loading:c,error:g,toggleFavourite:async y=>{var f,h;try{if(c.value=!0,g.value=null,!((f=$.user)!=null&&f.uid))throw new Error("Please login to manage favourites");const d=await $fetch("/api/user/favourite",{method:"POST",body:{productId:y,userId:$.user.uid}});if(d.success)return d.action==="added"?m.value.push(y):m.value=m.value.filter(o=>o!==y),{success:!0,message:d.message,isFavourite:d.isFavourite}}catch(d){return g.value=((h=d.data)==null?void 0:h.message)||d.message||"Failed to toggle favourite",{success:!1,error:g.value}}finally{c.value=!1}},getFavourites:async()=>{var y,f;try{if(c.value=!0,g.value=null,!((y=$.user)!=null&&y.uid))return{success:!1,error:"Please login to view favourites"};const h=await $.getIdToken(),d=await $fetch(`/api/favourites/${$.user.uid}`,{headers:{Authorization:`Bearer ${h}`}});if(d.success)return k.value=d.data.favourites,m.value=d.data.favourites.map(o=>o.id),{success:!0,data:d.data.favourites,count:d.data.count}}catch(h){return g.value=((f=h.data)==null?void 0:f.message)||h.message||"Failed to fetch favourites",{success:!1,error:g.value}}finally{c.value=!1}},isFavourite:y=>m.value.includes(y),clearFavourites:()=>{k.value=[],m.value=[],g.value=null}}}),Ke={class:"product-layout"},Qe={class:"mobile-filter-toggle"},Xe={key:0,class:"sidebar-container"},Ye={class:"sidebar-content"},es={class:"drawer-header",style:{display:"flex","align-items":"center","justify-content":"space-between"}},ss={class:"main-content"},ts={key:1,class:"no-products"},os={class:"no-products-container"},as={class:"no-products-icon"},ls={key:2},ns={class:"product-list-header"},rs={class:"product-count"},is={key:0},cs={class:"product-sort"},ds={class:"product__grid"},us={class:"product__grid-right"},ps={class:"product__grid-w"},_s=["href"],fs={class:"product__grid-w__list-img"},vs=["src"],ms={class:"product__grid-w__list-content"},gs={class:"product__grid-w__list-title multi-line-ellipsis"},ys={key:0,class:"product__grid-w__list-rating"},hs={class:"review-count text-xs"},bs={class:"product__grid-w__list-price_fav"},ws={class:"product__grid-w__list-price"},ks={__name:"ProductList",props:{products:{type:Array,default:()=>[]},isLoading:{type:Boolean,default:!1}},setup(k){const m=x(""),c=x(!1),{toUSD:g}=Se(),{$toast:$}=pe(),V=_e(),F=Je(),B=x(!1);{const r=()=>{B.value=window.innerWidth<=992};r(),window.addEventListener("resize",r),K(()=>{window.removeEventListener("resize",r)})}const p=x("price-asc"),y=fe(()=>{if(!Array.isArray(h.products))return[];let r=[...h.products];switch(p.value){case"price-asc":r.sort((e,l)=>{var R,A,S,I;const C=((A=(R=e==null?void 0:e.bundles)==null?void 0:R[0])==null?void 0:A.price)??e.price??0,z=((I=(S=l==null?void 0:l.bundles)==null?void 0:S[0])==null?void 0:I.price)??l.price??0;return C-z});break;case"price-desc":r.sort((e,l)=>{var R,A,S,I;const C=((A=(R=e==null?void 0:e.bundles)==null?void 0:R[0])==null?void 0:A.price)??e.price??0;return(((I=(S=l==null?void 0:l.bundles)==null?void 0:S[0])==null?void 0:I.price)??l.price??0)-C});break;case"name-asc":r.sort((e,l)=>(e.name||"").localeCompare(l.name||""));break;case"name-desc":r.sort((e,l)=>(l.name||"").localeCompare(e.name||""));break}return r});function f(r){p.value=r}const h=k;async function d(r){const e=await F.toggleFavourite(r.id);e.success?$.success(e.message):$.error(e.error)}function o(){c.value=!c.value,c.value?document.body.style.overflow="hidden":document.body.style.overflow=""}function b(){c.value=!1,document.body.style.overflow=""}function _(r){const e=L(r);V.push({path:"/",query:e}),window.innerWidth<=768&&b()}function L(r){var l,C,z;const e={};return(l=r.brands)!=null&&l.length&&(e.brands=r.brands.join(",")),(C=r.priceRanges)!=null&&C.length&&(e.priceRanges=r.priceRanges.map(R=>{var A,S;return(S=(A=R.label)==null?void 0:A.replace(/[^0-9\-+]/g,""))==null?void 0:S.replace(/\+/g,"+")}).join(",")),(z=r.storage)!=null&&z.length&&(e.storage=r.storage.join(",")),e}return K(()=>{document.body.style.overflow=""}),(r,e)=>{var G,T;const l=Q,C=ye,z=Te,R=we,A=Oe,S=Ze,I=xe,Y=ke,ee=$e,se=Fe,te=We;return u(),w("div",Ke,[s("div",Qe,[t(C,{onClick:o,class:"filter-btn"},{default:n(()=>[t(l,{class:"filter-toggle-icon"},{default:n(()=>[t(i(ve))]),_:1}),e[2]||(e[2]=v(" Filters ")),t(l,{class:me(["filter-arrow-icon",{rotated:i(c)}])},{default:n(()=>[t(i(ge))]),_:1},8,["class"])]),_:1,__:[2]})]),i(B)?P("",!0):(u(),w("div",Xe,[s("div",Ye,[e[3]||(e[3]=s("div",{class:"flex justify-between items-center"},[s("h3",null,"Filters")],-1)),t(z,{onFilterChange:_})])])),t(R,{modelValue:i(c),"onUpdate:modelValue":e[0]||(e[0]=a=>be(c)?c.value=a:null),direction:"ltr",size:"80vw","with-header":!1,"custom-class":"mobile-filter-drawer"},{default:n(()=>[s("div",es,[e[4]||(e[4]=s("h3",{style:{margin:"0"},class:"font-briscolade"},"Filters",-1)),t(C,{onClick:b,circle:"",class:"close-btn"},{default:n(()=>[t(l,null,{default:n(()=>[t(i(he))]),_:1})]),_:1})]),t(z,{onFilterChange:_})]),_:1},8,["modelValue"]),s("div",ss,[e[11]||(e[11]=s("h2",{class:"collection-heading font-briscolade text-2xl"}," Browse our latest collection ",-1)),k.isLoading?(u(),E(Ae,{key:0,type:"spinner",size:"small",message:"Loading products..."})):(G=k.products)!=null&&G.length?(u(),w("div",ls,[s("div",ns,[s("div",rs,[v(" Showing "+M((T=k.products)==null?void 0:T.length)+" product",1),k.products&&k.products.length!==1?(u(),w("span",is,"s")):P("",!0)]),s("div",cs,[t(ee,{placement:"bottom-end",onCommand:f,trigger:"click"},{dropdown:n(()=>[t(Y,null,{default:n(()=>[t(I,{command:"price-asc"},{default:n(()=>[e[7]||(e[7]=v(" Price: Low to High ")),i(p)==="price-asc"?(u(),E(l,{key:0,style:{"margin-left":"8px"}},{default:n(()=>[t(i(q))]),_:1})):P("",!0)]),_:1,__:[7]}),t(I,{command:"price-desc"},{default:n(()=>[e[8]||(e[8]=v(" Price: High to Low ")),i(p)==="price-desc"?(u(),E(l,{key:0,style:{"margin-left":"8px"}},{default:n(()=>[t(i(q))]),_:1})):P("",!0)]),_:1,__:[8]}),t(I,{command:"name-asc"},{default:n(()=>[e[9]||(e[9]=v(" Name: A-Z ")),i(p)==="name-asc"?(u(),E(l,{key:0,style:{"margin-left":"8px"}},{default:n(()=>[t(i(q))]),_:1})):P("",!0)]),_:1,__:[9]}),t(I,{command:"name-desc"},{default:n(()=>[e[10]||(e[10]=v(" Name: Z-A ")),i(p)==="name-desc"?(u(),E(l,{key:0,style:{"margin-left":"8px"}},{default:n(()=>[t(i(q))]),_:1})):P("",!0)]),_:1,__:[10]})]),_:1})]),default:n(()=>[t(i(Ce),{label:"Sort",variant:"transparent",size:"large"},{icon:n(()=>[t(S,{size:16})]),default:n(()=>[e[6]||(e[6]=s("span",{class:"sort-label"},"Sort",-1))]),_:1,__:[6]})]),_:1})])]),s("div",ds,[s("div",us,[s("ul",ps,[(u(!0),w(N,null,U(i(y),a=>{var O,W,Z;return u(),w("li",{key:a.id,class:"product__grid-w__list"},[s("a",{class:"_p",href:`/${a.categoryId}/${a.id}`},[s("span",fs,[s("img",{src:a==null?void 0:a.imageUrl,alt:"",loading:"lazy"},null,8,vs)]),s("div",ms,[s("span",gs,M(a.name),1),s("span",null,M((O=a==null?void 0:a.bundles[0])==null?void 0:O.ram)+" / "+M((W=a==null?void 0:a.bundles[0])==null?void 0:W.storage),1),a.averageRating||a.totalReviews?(u(),w("div",ys,[t(se,{"model-value":a.averageRating,disabled:"",max:5,size:"large",class:"review-stars"},null,8,["model-value"]),s("span",hs,M(a.totalReviews)+" reviews ",1)])):P("",!0),s("div",bs,[s("span",ws,M(i(g)(((Z=a==null?void 0:a.bundles[0])==null?void 0:Z.price)||a.price)),1),t(C,{text:"",circle:"",onClick:Be(J=>d(a),["prevent"]),onMouseenter:J=>m.value=a.id,onMouseleave:e[1]||(e[1]=J=>m.value=""),class:"favourite"},{default:n(()=>[t(te,{size:24,fill:i(F).isFavourite(a.id)?"#000000":"none"},null,8,["fill"])]),_:2},1032,["onClick","onMouseenter"])])])],8,_s)])}),128))])])])])):(u(),w("div",ts,[s("div",os,[s("div",as,[t(A,{size:"70",color:"#d1d5db"})]),e[5]||(e[5]=s("div",{class:"no-products-content"},[s("h2",{class:"no-products-title"},"No products found"),s("p",{class:"no-products-subtitle"}," Try adjusting your filters to see more results. ")],-1))])]))])])}}},Ls=X(ks,[["__scopeId","data-v-ce2eb769"]]);export{Ls as P};
