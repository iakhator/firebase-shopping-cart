var C=Object.defineProperty;var F=o=>{throw TypeError(o)};var T=(o,r,e)=>r in o?C(o,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[r]=e;var $=(o,r,e)=>T(o,typeof r!="symbol"?r+"":r,e),x=(o,r,e)=>r.has(o)||F("Cannot "+e);var v=(o,r,e)=>(x(o,r,"read from private field"),e?e.call(o):r.get(o)),I=(o,r,e)=>r.has(o)?F("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(o):r.set(o,e);import{e as E,as as y,k,at as L,f as M,au as P,av as q,aw as N,j as G,r as U}from"./D9U9Eznd.js";import{u as J}from"./D3VT9Cgh.js";function K(o){return typeof o=="string"?`'${o}'`:new V().serialize(o)}const V=function(){var r;class o{constructor(){I(this,r,new Map)}compare(t,s){const n=typeof t,a=typeof s;return n==="string"&&a==="string"?t.localeCompare(s):n==="number"&&a==="number"?t-s:String.prototype.localeCompare.call(this.serialize(t,!0),this.serialize(s,!0))}serialize(t,s){if(t===null)return"null";switch(typeof t){case"string":return s?t:`'${t}'`;case"bigint":return`${t}n`;case"object":return this.$object(t);case"function":return this.$function(t)}return String(t)}serializeObject(t){const s=Object.prototype.toString.call(t);if(s!=="[object Object]")return this.serializeBuiltInType(s.length<10?`unknown:${s}`:s.slice(8,-1),t);const n=t.constructor,a=n===Object||n===void 0?"":n.name;if(a!==""&&globalThis[a]===n)return this.serializeBuiltInType(a,t);if(typeof t.toJSON=="function"){const i=t.toJSON();return a+(i!==null&&typeof i=="object"?this.$object(i):`(${this.serialize(i)})`)}return this.serializeObjectEntries(a,Object.entries(t))}serializeBuiltInType(t,s){const n=this["$"+t];if(n)return n.call(this,s);if(typeof(s==null?void 0:s.entries)=="function")return this.serializeObjectEntries(t,s.entries());throw new Error(`Cannot serialize ${t}`)}serializeObjectEntries(t,s){const n=Array.from(s).sort((i,h)=>this.compare(i[0],h[0]));let a=`${t}{`;for(let i=0;i<n.length;i++){const[h,c]=n[i];a+=`${this.serialize(h,!0)}:${this.serialize(c)}`,i<n.length-1&&(a+=",")}return a+"}"}$object(t){let s=v(this,r).get(t);return s===void 0&&(v(this,r).set(t,`#${v(this,r).size}`),s=this.serializeObject(t),v(this,r).set(t,s)),s}$function(t){const s=Function.prototype.toString.call(t);return s.slice(-15)==="[native code] }"?`${t.name||""}()[native]`:`${t.name}(${t.length})${s.replace(/\s*\n\s*/g,"")}`}$Array(t){let s="[";for(let n=0;n<t.length;n++)s+=this.serialize(t[n]),n<t.length-1&&(s+=",");return s+"]"}$Date(t){try{return`Date(${t.toISOString()})`}catch{return"Date(null)"}}$ArrayBuffer(t){return`ArrayBuffer[${new Uint8Array(t).join(",")}]`}$Set(t){return`Set${this.$Array(Array.from(t).sort((s,n)=>this.compare(s,n)))}`}$Map(t){return this.serializeObjectEntries("Map",t.entries())}}r=new WeakMap;for(const e of["Error","RegExp","URL"])o.prototype["$"+e]=function(t){return`${e}(${t})`};for(const e of["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"])o.prototype["$"+e]=function(t){return`${e}[${t.join(",")}]`};for(const e of["BigInt64Array","BigUint64Array"])o.prototype["$"+e]=function(t){return`${e}[${t.join("n,")}${t.length>0?"n":""}]`};return o}(),W=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],H=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],Q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",b=[];class X{constructor(){$(this,"_data",new j);$(this,"_hash",new j([...W]));$(this,"_nDataBytes",0);$(this,"_minBufferSize",0)}finalize(r){r&&this._append(r);const e=this._nDataBytes*8,t=this._data.sigBytes*8;return this._data.words[t>>>5]|=128<<24-t%32,this._data.words[(t+64>>>9<<4)+14]=Math.floor(e/4294967296),this._data.words[(t+64>>>9<<4)+15]=e,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}_doProcessBlock(r,e){const t=this._hash.words;let s=t[0],n=t[1],a=t[2],i=t[3],h=t[4],c=t[5],l=t[6],f=t[7];for(let u=0;u<64;u++){if(u<16)b[u]=r[e+u]|0;else{const g=b[u-15],d=(g<<25|g>>>7)^(g<<14|g>>>18)^g>>>3,B=b[u-2],w=(B<<15|B>>>17)^(B<<13|B>>>19)^B>>>10;b[u]=d+b[u-7]+w+b[u-16]}const m=h&c^~h&l,p=s&n^s&a^n&a,O=(s<<30|s>>>2)^(s<<19|s>>>13)^(s<<10|s>>>22),S=(h<<26|h>>>6)^(h<<21|h>>>11)^(h<<7|h>>>25),z=f+S+m+H[u]+b[u],A=O+p;f=l,l=c,c=h,h=i+z|0,i=a,a=n,n=s,s=z+A|0}t[0]=t[0]+s|0,t[1]=t[1]+n|0,t[2]=t[2]+a|0,t[3]=t[3]+i|0,t[4]=t[4]+h|0,t[5]=t[5]+c|0,t[6]=t[6]+l|0,t[7]=t[7]+f|0}_append(r){typeof r=="string"&&(r=j.fromUtf8(r)),this._data.concat(r),this._nDataBytes+=r.sigBytes}_process(r){let e,t=this._data.sigBytes/64;r?t=Math.ceil(t):t=Math.max((t|0)-this._minBufferSize,0);const s=t*16,n=Math.min(s*4,this._data.sigBytes);if(s){for(let a=0;a<s;a+=16)this._doProcessBlock(this._data.words,a);e=this._data.words.splice(0,s),this._data.sigBytes-=n}return new j(e,n)}}class j{constructor(r,e){$(this,"words");$(this,"sigBytes");r=this.words=r||[],this.sigBytes=e===void 0?r.length*4:e}static fromUtf8(r){const e=unescape(encodeURIComponent(r)),t=e.length,s=[];for(let n=0;n<t;n++)s[n>>>2]|=(e.charCodeAt(n)&255)<<24-n%4*8;return new j(s,t)}toBase64(){const r=[];for(let e=0;e<this.sigBytes;e+=3){const t=this.words[e>>>2]>>>24-e%4*8&255,s=this.words[e+1>>>2]>>>24-(e+1)%4*8&255,n=this.words[e+2>>>2]>>>24-(e+2)%4*8&255,a=t<<16|s<<8|n;for(let i=0;i<4&&e*8+i*6<this.sigBytes*8;i++)r.push(Q.charAt(a>>>6*(3-i)&63))}return r.join("")}concat(r){if(this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4),this.sigBytes%4)for(let e=0;e<r.sigBytes;e++){const t=r.words[e>>>2]>>>24-e%4*8&255;this.words[this.sigBytes+e>>>2]|=t<<24-(this.sigBytes+e)%4*8}else for(let e=0;e<r.sigBytes;e+=4)this.words[this.sigBytes+e>>>2]=r.words[e>>>2];this.sigBytes+=r.sigBytes}}function Y(o){return new X().finalize(o).toBase64()}function _(o){return Y(K(o))}function Z(o,r,e){const[t={},s]=[{},r],n=E(()=>y(o)),a=E(()=>y(t.key)||"$f"+_([s,typeof n.value=="string"?n.value:"",...tt(t)]));if(!t.baseURL&&typeof n.value=="string"&&n.value[0]==="/"&&n.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:i,lazy:h,default:c,transform:l,pick:f,watch:u,immediate:m,getCachedData:p,deep:O,dedupe:S,...z}=t,A=k({...L,...z,cache:typeof t.cache=="boolean"?void 0:t.cache}),g={server:i,lazy:h,default:c,transform:l,pick:f,immediate:m,getCachedData:p,deep:O,dedupe:S,watch:u===!1?[]:[...u||[],A]};if(!m){let w=function(){g.immediate=!0};M(a,w,{flush:"sync",once:!0}),M([...u||[],A],w,{flush:"sync",once:!0})}let d;return J(u===!1?a.value:a,()=>{var R;(R=d==null?void 0:d.abort)==null||R.call(d,new DOMException("Request aborted as another request to the same endpoint was initiated.","AbortError")),d=typeof AbortController<"u"?new AbortController:{};const w=y(t.timeout);let D;return w&&(D=setTimeout(()=>d.abort(new DOMException("Request aborted due to timeout.","AbortError")),w),d.signal.onabort=()=>clearTimeout(D)),(t.$fetch||globalThis.$fetch)(n.value,{signal:d.signal,...A}).finally(()=>{clearTimeout(D)})},g)}function tt(o){var e;const r=[((e=y(o.method))==null?void 0:e.toUpperCase())||"GET",y(o.baseURL)];for(const t of[o.params||o.query]){const s=y(t);if(!s)continue;const n={};for(const[a,i]of Object.entries(s))n[y(a)]=y(i);r.push(n)}if(o.body){const t=y(o.body);if(!t)r.push(_(t));else if(t instanceof ArrayBuffer)r.push(_(Object.fromEntries([...new Uint8Array(t).entries()].map(([s,n])=>[s,n.toString()]))));else if(t instanceof FormData){const s={};for(const n of t.entries()){const[a,i]=n;s[a]=i instanceof File?i.name:i}r.push(_(s))}else if(P(t))r.push(_(k(t)));else try{r.push(_(t))}catch{console.warn("[useFetch] Failed to hash body",t)}}return r}const ot=q("product",()=>{const{isLoading:o,fetchData:r}=N(),{$toast:e}=G(),t=U([]),s=U(null),n=U(null),a=async c=>{var f,u,m;const l=new URLSearchParams;(f=c==null?void 0:c.brands)!=null&&f.length&&l.set("brands",c.brands.join(",")),(u=c==null?void 0:c.priceRanges)!=null&&u.length&&l.set("priceRanges",c.priceRanges.join(",")),(m=c==null?void 0:c.storage)!=null&&m.length&&l.set("storage",c.storage.join(","));try{const p=await r(`/api/products?${l.toString()}`);t.value=p.products||[]}catch(p){n.value=p.message,e&&e.error(p.message)}},i=async c=>{try{const{data:l,error:f}=await Z(`/api/products/${c}`,"$8GdkIvl3GN");if(f.value){e&&e.error(f.value.message||"Failed to load product");return}s.value=l.value.product}catch(l){n.value=l.message,e&&e.error(l.message)}},h=E(()=>t.value||[]);return{isLoading:o,products:t,product:s,errorMessage:n,getAllProducts:a,getProduct:i,getProducts:h}});export{ot as u};
